https://colab.research.google.com/drive/14S-20hlaKM7QlrMDyLUeHdLY53qA_L7c?usp=sharing

# # Этот код выполняет поиск по ключевым словам из файла в выбранной поисковой системе в нужном регионе, затем парсит по API результаты
# ТОП-10 выдачи конкурентов (пока только в ПС Google) и анализирует текст из метатегов URL каждой страницы (Title, Description, H1, H2, H3)
# на предмет наличия коммерческих слов-маркеров. В результате выводится информация в виде таблицы с 2 столбцами: поисковый запрос, тип запроса
# (коммерческий, информационный). Таблица также сохраняется в файл csv.


Далее экспериментировал еще с несколькими вариантами парсеров с многоступенчатой проверкой типа такого алгоритма:
АЛГОРИТМ ОПРЕДЕЛЕНИЯ ТИПА ЗАПРОСА (коммерческий или информационный) по ключевому слову:
1. парсер берет ключевое слово из файла и сначала проверяет метатеги в html-коде на первой странице ТОП-10 выдачи по первому ключевому слову и присваивает
ей индекс 1 в зависимости от присутствия слов-маркеров. Если слово-маркер присутствует в метатегах Title, Description, h1, h2, h3, то страница получает 
индекс = 1, и далее берется следующая страница из ТОП-10 выдачи, пока не будут пройдены все страницы и запросу будет присвоен тип коммерческий или 
информационный, если слова-маркеры отсутствует - то выполняем пункт 2.

2. если слова-маркеры отсутствуют в метатегах html-кода страницы, то парсер смотрит URL этой страницы: если в нем присутствует одно из слов catalog, 
tovar, magazin, shop то  странице присваивается индекс=1, и далее берется следующая страница из ТОП-10 выдачи, пока не будут пройдены все страницы и
запросу будет присвоен тип коммерческий или информационный, если отсутствует - то присваивается 0.

3. если при анализе страниц из ТОП-10 выдачи попадется страница, в которой доступ к метатегам закрыт или они пустые, то парсер смотрит URL этой
страницы: если в нем присутствует одно из слов catalog, tovar, magazin, shop то  странице присваивается индекс=1, и далее берется следующая страница из 
ТОП-10 выдачи, пока не будут пройдены все страницы и запросу будет присвоен тип коммерческий или информационный, если отсутствует - то парсер присваивает 
этой странице индекс уже исходя из сравнения текста самого ключевого слова из файла со словами-маркерами: если слово-маркер встречается в ключевом 
слове из файла, то эта страница получает индекс = 1, если нет, то = 0, и далее берется следующая страница из ТОП-10 выдачи, пока не будут пройдены все
страницы и запросу будет присвоен тип коммерческий или информационный

4. Далее берется следующая страница и так далее до 10. 

5. если из 10 страниц индекс 1 встречается более 50%, то данное ключевое слово относится к типу запроса - коммерческий, иначе - информационный. 

Далее Цикл повторяется, берется второе ключевое слово из файла и алгоритм повторяется, пока все ключевые слова из файла не будут проанализированы. 
